<!DOCTYPE html>
<html lang="vi" class="no-js"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
  <link rel="stylesheet" th:href="@{/css/style.css}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="shortcut icon" th:href="@{/img/fav.png}">
  <meta charset="UTF-8">
  <title>Karma Shop</title>
</head>

<body>
<section layout:fragment="content">
  <section class="banner-area organic-breadcrumb">
    <div class="container">
      <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-between">
        <h1 class="text-info">Trang hồ sơ</h1>
      </div>
    </div>
  </section>

  <div class="order_details_table">
    <div class="container">
      <div class="row">
        <div class="col-md-4">
          <div class="infoimg d-flex align-items-center">
            <div class="avatar me-3">
              <img th:src="${user.profileImageUrl != null ? user.profileImageUrl : 'https://static-00.iconduck.com/assets.00/profile-icon-512x512-w0uaq4yr.png'}" alt="Avatar" />
            </div>
            <div class="info">
              <p th:text="${user.username}" class="h5 mb-0"></p>
            </div>
          </div>
          <hr />
          <div class="action mb-4">
            <a th:href="@{/orders/my-orders}" class="btn btn-outline-primary">Đơn hàng của tôi</a>
          </div>
          <form th:action="@{/profile/upload-image}" method="post" enctype="multipart/form-data">
            <div class="mb-3">
              <label for="imageUpload" class="form-label">Thay đổi hình ảnh:</label>
              <input type="file" class="form-control" id="imageUpload" name="image" accept="image/*" required>
            </div>
            <button type="submit" class="btn btn-primary">Tải lên</button>
          </form>
          <div th:if="${message}" class="alert alert-success mt-3" role="alert">
            <p th:text="${message}"></p>
          </div>
          <div th:if="${error}" class="alert alert-danger mt-3" role="alert">
            <p th:text="${error}"></p>
          </div>
        </div>

        <div class="col-md-8">
          <div class="noidung">
            <div class="title">
              <h5>Hồ sơ của tôi</h5>
              <p>Quản lý thông tin hồ sơ để bảo mật tài khoản</p>
              <hr />
              <form th:action="@{/profile/update}" method="post">
                <table class="profile">
                  <tr>
                    <td><label>Tên đăng nhập:</label></td>
                    <td class="username">
                      <span th:text="${user.username}"></span>
                    </td>
                  </tr>
                  <tr>
                    <td><label>Họ tên:</label></td>
                    <td>
                      <input type="text" class="form-control" name="fullname" th:value="${user.fullname}" placeholder="Nhập họ tên" required />
                    </td>
                  </tr>
                  <tr>
                    <td><label>Email:</label></td>
                    <td class="email">
                      <input type="email" class="form-control" name="email" th:value="${user.email}" placeholder="Nhập email" readonly />
                    </td>
                  </tr>
                  <tr>
                    <td><label>Số điện thoại:</label></td>
                    <td>
                      <input type="text" class="form-control" name="phone" th:value="${user.phone}" placeholder="Nhập số điện thoại" required />
                    </td>
                  </tr>
                  <tr>
                    <td><label>Địa chỉ:</label></td>
                    <td>
                      <input type="text" class="form-control" name="address" th:value="${user.address}" placeholder="Nhập địa chỉ" required />
                    </td>
                  </tr>
                </table>
                <button type="submit" class="btn btn-outline-primary mt-3">Lưu</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>
</html>